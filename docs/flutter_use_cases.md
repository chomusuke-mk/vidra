# Flutter app use cases and backend endpoints

The table below summarizes 21 key interactions enabled by the Flutter app, along with the backend endpoints that support them.

| #   | Use case (Flutter)                                      | Description                                                                                 | Backend endpoints                                                                                 |
| --- | ------------------------------------------------------ | ------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------- |
| 1   | Check service availability                             | On app launch, validate the backend is alive and fetch an initial overview.                 | `GET /` (healthcheck), `GET /api/jobs` (overview via `summary`).                                |
| 2   | Create a single-video download                         | User pastes a single URL and enqueues a new job immediately.                                | `POST /api/jobs`.                                                                                |
| 3   | Create a playlist download with deferred selection     | User submits a large playlist and decides later which items to download.                    | `POST /api/jobs` (with metadata that triggers `selection_required`).                             |
| 4   | Preview metadata before creating a job                 | Show title, duration, thumbnails before confirming the download.                            | `POST /api/preview`.                                                                             |
| 5   | Run a "dry-run" to inspect CLI arguments              | Advanced users review the yt-dlp options before starting the job.                            | `POST /api/jobs/dry-run`.                                                                         |
| 6   | List all jobs                                          | Main view renders the full queue and summarized progress.                                   | `GET /api/jobs`.                                                                                 |
| 7   | Filter jobs by status                                  | Segmented view (e.g., only `running` or `failed`).                                          | `GET /api/jobs?status=running`.                                                                  |
| 8   | Filter jobs by owner                                   | A user sees only their own downloads.                                                       | `GET /api/jobs?owner={userId}`.                                                                  |
| 9   | Fetch full job details                                 | Detail screen with progress, generated files, totals, and options.                          | `GET /api/jobs/{job_id}`.                                                                        |
| 10  | Review job logs                                        | Render the chronological job log stream.                                                    | `GET /api/jobs/{job_id}/logs`.                                                                   |
| 11  | Show playlist summary for a job                        | Present overall playlist state (item count, percent, etc.).                                 | `GET /api/jobs/{job_id}/playlist`.                                                               |
| 12  | Download the full playlist entry list                  | Populate detailed lists or selection tables.                                                | `GET /api/jobs/{job_id}/playlist/items` or `GET /api/jobs/{job_id}/playlist?include=entries`.    |
| 13  | Confirm playlist item selection                        | User selects which videos to download and resumes the flow.                                 | `POST /api/jobs/{job_id}/playlist/selection`.                                                    |
| 14  | Cancel an active job                                   | "Cancel" button when errors occur or user changes their mind.                               | `POST /api/jobs/{job_id}/cancel`.                                                                |
| 15  | Cancel multiple jobs at once                           | Bulk action from the list view.                                                             | `POST /api/jobs/cancel` (with `job_ids` or `scope="all"`).                                      |
| 16  | Pause a job                                            | Temporarily stop an in-progress download.                                                   | `POST /api/jobs/{job_id}/pause`.                                                                 |
| 17  | Resume a paused job                                    | Continue a job that was paused.                                                             | `POST /api/jobs/{job_id}/resume`.                                                                |
| 18  | Retry a failed job                                     | Relaunch a job after fixing an error.                                                       | `POST /api/jobs/{job_id}/retry`.                                                                 |
| 19  | Delete a finished job                                  | Clean up the queue and local history.                                                       | `DELETE /api/jobs/{job_id}`.                                                                     |
| 20  | Fetch profiles/presets (future)                        | UI will show available presets once the feature ships.                                      | `GET /api/profiles`.                                                                             |
| 21  | Receive content from Android share intent              | Sharing text/URLs from another app opens a quick-action overlay that enqueues new jobs.     | `POST /api/jobs` (with `share_intent` metadata), WebSocket `overview` to reflect changes in UI. |

> Note: even though the app uses WebSockets for real-time updates, all the flows above have REST endpoints for bootstrapping and explicit user actions.

> **Tip:** preview and dry-run endpoints (`POST /api/preview`, `POST /api/jobs/dry-run`) are disabled by default to reduce attack surface. Set `VIDRA_ENABLE_PREVIEW_API=1` (or `true`) in the environment before launching the backend when you need them for debugging.
